# **NOTE**: this file is generated by `dhall-render`.
# You should NOT edit it manually, your changes will be lost.

---
jobs:
  update:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
      with:
        fetch-depth: '1'
    - env:
        DOCKER_PASSWORD: "${{ secrets.GITHUB_TOKEN }}"
      name: Login to docker.pkg.github.com
      run: |-
        set -eu -o pipefail
        set -x
        docker login -u "$GITHUB_ACTOR" --password-stdin docker.pkg.github.com <<EOF
        $DOCKER_PASSWORD
        EOF
    - name: self-update
      uses: timbertson/self-update-action@v1
      with:
        GITHUB_TOKEN: "${{secrets.GHTOKEN_PAT}}"
        setupScript: |
          #!/usr/bin/env bash
          set -eu -o pipefail
          docker run --rm -i "--volume" "$PWD:/cwd" "--workdir=/cwd" "docker.pkg.github.com/timbertson/dhall-ci/dhall:1.37" bash -eu -o pipefail <<EOF_runInDocker
            ./dhall/bump dhall/dependencies/*

          EOF_runInDocker
        updateScript: |
          #!/usr/bin/env bash
          set -eu -o pipefail
          docker run --rm -i "--volume" "$PWD:/cwd" "--workdir=/cwd" "docker.pkg.github.com/timbertson/dhall-ci/dhall:1.37" bash -eu -o pipefail <<EOF_runInDocker
            ./dhall/render
            ./dhall/fix --lint dhall

          EOF_runInDocker
name: Update
'on':
  push:
    branches:
    - self-upate-test
  schedule:
  - cron: 0 0 * * 1,4
  workflow_dispatch: {}
